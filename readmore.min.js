(function(e){var t="readmore",s={speed:100,maxHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:true,sectionCSS:"display: block; width: 100%;",startOpen:false,toggleClass:"readmore-js-toggle",sectionClass:"readmore-js-section",expandedClass:"readmore-js-expanded",collapsedClass:"readmore-js-collapsed",beforeToggle:function(){},afterToggle:function(){}},i={};function o(o,a){this.element=o;this.options=e.extend({},s,a);e(this.element).data("max-height",this.options.maxHeight);e(this.element).data("height-margin",this.options.heightMargin);delete this.options.maxHeight;var n=this.options.toggleClass+" + "+this.options.sectionClass;if(this.options.embedCSS&&!(n in i)){var l="."+this.options.toggleClass+", ."+this.options.sectionClass+" { "+this.options.sectionCSS+" } "+"."+this.options.sectionClass+" { overflow: hidden; } ";(function(e,t){var s=e.createElement("style");s.type="text/css";if(s.styleSheet){s.styleSheet.cssText=t}else{s.appendChild(e.createTextNode(t))}e.getElementsByTagName("head")[0].appendChild(s)})(document,l);i[n]=true}this._defaults=s;this._name=t;this.init()}o.prototype={init:function(){var t=this;e(this.element).each(function(){var s=e(this),i=s.css("max-height").replace(/[^-\d\.]/g,"")>s.data("max-height")?s.css("max-height").replace(/[^-\d\.]/g,""):s.data("max-height"),o=s.data("height-margin");if(s.css("max-height")!="none"){s.css("max-height","none")}t.setBoxHeight(s);if(s.outerHeight(true)<=i+o){return true}else{s.addClass(t.options.sectionClass+" "+t.options.collapsedClass).data("collapsedHeight",i);var a=t.options.startOpen?t.options.lessLink:t.options.moreLink;s.after(e(a).on("click",function(e){t.toggleSlider(this,s,e)}).addClass(t.options.toggleClass));if(!t.options.startOpen){s.css({height:i})}}});e(window).on("resize",function(e){t.resizeBoxes()})},toggleSlider:function(t,s,i){i.preventDefault();var o=this,a=newLink=sectionStateClass="",n=false,l=e(s).data("collapsedHeight");if(e(s).height()<=l){a=e(s).data("expandedHeight")+"px";newLink="lessLink";n=true;sectionStateClass=o.options.expandedClass}else{a=l;newLink="moreLink";sectionStateClass=o.options.collapsedClass}o.options.beforeToggle(t,s,n);e(s).animate({height:a},{duration:o.options.speed,complete:function(){o.options.afterToggle(t,s,n);e(t).replaceWith(e(o.options[newLink]).on("click",function(e){o.toggleSlider(this,s,e)}).addClass(o.options.toggleClass));e(this).removeClass(o.options.collapsedClass+" "+o.options.expandedClass).addClass(sectionStateClass)}})},setBoxHeight:function(e){var t=e.clone().css({height:"auto",width:e.width(),overflow:"hidden"}).insertAfter(e),s=t.outerHeight(true);t.remove();e.data("expandedHeight",s)},resizeBoxes:function(){var t=this;e("."+t.options.sectionClass).each(function(){var s=e(this);t.setBoxHeight(s);if(s.height()>s.data("expandedHeight")||s.hasClass(t.options.expandedClass)&&s.height()<s.data("expandedHeight")){s.css("height",s.data("expandedHeight"))}})},destroy:function(){var t=this;e(this.element).each(function(){var s=e(this);s.removeClass(t.options.sectionClass+t.options.collapsedClass+" "+t.options.expandedClass).css({"max-height":"",height:"auto"}).next(t.options.toggleClass).remove();s.removeData()})}};e.fn[t]=function(s){var i=arguments;if(s===undefined||typeof s==="object"){return this.each(function(){if(e.data(this,"plugin_"+t)){var i=e.data(this,"plugin_"+t);i["destroy"].apply(i)}e.data(this,"plugin_"+t,new o(this,s))})}else if(typeof s==="string"&&s[0]!=="_"&&s!=="init"){return this.each(function(){var a=e.data(this,"plugin_"+t);if(a instanceof o&&typeof a[s]==="function"){a[s].apply(a,Array.prototype.slice.call(i,1))}})}}})(jQuery);
